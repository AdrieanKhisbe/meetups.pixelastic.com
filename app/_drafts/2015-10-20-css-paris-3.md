---
layout: post
title: "CSS Paris #3"
tags: css
---

Third edition of the ParisCSS meetup. I could not attend to the first two
session, so this is a first for me. It took place at Numa, and we were about 70.

# CSS Masks

In the first talk, [Vincent De Oliveira][1] told us about CSS masks. He started
by telling us that we might all already use CSS masks without knowing it.

`border-radius` and `overflow:hidden` are already rules that involves masks,
even if we do not really think of them that way. He showed some really nice and
clever tricks with a few simple divs, rotation animation and `overflow:hidden`.

He then told us about clipping, or how to use images with some transparent
pixels to define which part of an image should be displayed. He had an
impressive demo of a text that could be visible trough a complex form (here it
was the Eiffel tower), only using an image as background and a mask on top of
the element.

The end of the talk was really impressive, but it was also really hard to
understand how things were working. He showed us how he animated icons or
animated a cursive script but to be honest I did not really understood how this
worked. I'll have to play with [the slides][2].

# Rendering performances

The second talk was done by Jean-Pierre Vincent (alias @theystolemynick). I gave
him an Algolia shirt #millisecondsmatters right before the talk, and he wore it
while speaking.

The slides are already available [here][3].

The talk was dense, and a broad array of topics were discussed, but the overall
rhythm was slow and it was sometimes hard to follow. The talk started with the
conventionnal numbers for this kind of talk (speed is directly linked to
revenue), but he also spoke about how it is now good for SEO and how the human
brain reacts to instant.

He covered the subjects of repaints and reflows in CSS, but focused on CSS
animations compared to jQuery animations. Done well, animations can really
improve the user speed perception. Quickly moving items or fading images when
changing pages can distract the user long enough so she cannot see that a page
is currently loading.

His point was that jQuery animations are not inherently slow because they use
JavaScript, but because this JavaScript asks position and dimension information
to the DOM engine. First, to get the correct values, the DOM engine must force
a reflow of the whole page. Also, it requires a communication bridge between the
JavaScript thread and the DOM engine, which requires stopping both of them while
they communicate.

For every animation that do not depend on user input (eg. moving an image from
one fixed position to another), we can pre-compute the bounds and simply create
two CSS classes (one for the start and one for the end), and use CSS animations
to let the GPU handle the rendering.

For "unpredictable animations" (eg. based on the way the user moves her mouse or
scroll the page), there is not silver bullet. The main advice is to throttle or
debounce the call. There is no need to fire an animation on every `scroll` event
for example, but only on the first or last one.

As always, there is no perfect solution. One must be aware of all the pros and
cons of every technique. For example, using the GPU (through CSS animations)
allows for much faster rendering, but will also drain the battery more quickly
on mobile devices. One can use the `translateZ(0)` trick to force an animation
to use the GPU, but this will prevent browsers from doing any optimisation.

The trickiest part is that some devices have better GPU than others. Sometimes,
it is better to let the CPU handle the animation in specific browser/device
targets. As it is near impossible to perfectly target each mobile/browser with
the best implementation, you either have to go for the lowest common
denominator, or only focus on a few specific devices. None of this solutions are
optimal.

# CSS Grid

Mathieu Parisot
CSS 1996, chirac, clinton, francs

des grilles, partout, des alignements
table, css table, floats
on utilise table et floats qui sont pas fait pour du layout

inline block, à coté, pas de dimension
block, en dessous, dimension
inline-block, les deux, maisfont-size du parent pour les marges

plein de side-effetcts, comment ça déborde, comment faire des colonnes
users sait pas commence ç marche

flexbox, refait bootstrap en vrai css, fait pour du layout
flexbox cool, mais pas possible de déplacer ds blocs d'un parent à un autre pour
du rwd

pas supporté, c'est le futur
`display: grid`. 4 éléments, on les déplace, sans wrapper dans des blocks

`grid-row:1`, `grid-column:2` pour indiquer les coordonnées des blocs. super
simple
peut définir les `grid-template-columns` pour définir les templates sur le
container.
nouvelle unité en  `fr`, fraction de l'espace restant. `min-content`,
`max-content` taille de élément plus petit, taille element plus grand.
`fit-content`, s'adapte au contenu


[1]: https://twitter.com/iamvdo
[2]: http://slides.iamvdo.me/parisweb14/#/
[3]: http://fr.slideshare.net/jpvincent/les-performance-de-rendu-sur-mobile
